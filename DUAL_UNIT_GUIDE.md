# ğŸ“ HÆ°á»›ng Dáº«n Há»‡ Thá»‘ng 2 ÄÆ¡n Vá»‹

## ğŸ¯ Tá»•ng Quan

Há»‡ thá»‘ng há»— trá»£ **2 Ä‘Æ¡n vá»‹** cho má»—i nguyÃªn liá»‡u:
- **ÄÆ¡n vá»‹ mua** (Buying Unit): ÄÆ¡n vá»‹ khi mua nguyÃªn liá»‡u
- **ÄÆ¡n vá»‹ sá»­ dá»¥ng** (Usage Unit): ÄÆ¡n vá»‹ khi nháº­p vÃ o cÃ´ng thá»©c

## ğŸ’¡ Táº¡i Sao Cáº§n 2 ÄÆ¡n Vá»‹?

### VÃ­ Dá»¥ Thá»±c Táº¿:

**Bá»™t mÃ¬:**
- ğŸ’µ **Mua**: 1kg = 20,000Ä‘ (mua theo kg)
- ğŸ“ **DÃ¹ng**: 150g trong cÃ´ng thá»©c (nháº­p theo gram)

**Sá»¯a tÆ°Æ¡i:**
- ğŸ’µ **Mua**: 1L = 32,000Ä‘ (mua theo lÃ­t)
- ğŸ“ **DÃ¹ng**: 100ml trong cÃ´ng thá»©c (nháº­p theo ml)

**Trá»©ng gÃ :**
- ğŸ’µ **Mua**: 10 quáº£ = 35,000Ä‘ (mua theo chá»¥c)
- ğŸ“ **DÃ¹ng**: 3 quáº£ trong cÃ´ng thá»©c (nháº­p theo quáº£)

â†’ **Lá»£i Ã­ch**: Linh hoáº¡t, dá»… nháº­p liá»‡u, tÃ­nh toÃ¡n chÃ­nh xÃ¡c!

---

## ğŸ”„ Chuyá»ƒn Äá»•i Tá»± Äá»™ng

Há»‡ thá»‘ng tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c Ä‘Æ¡n vá»‹:

### Weight (CÃ¢n náº·ng):
- **1kg = 1000g**
- **1g = 0.001kg**

### Volume (Thá»ƒ tÃ­ch):
- **1L = 1000ml**
- **1ml = 0.001L**

### Countable (Äáº¿m Ä‘Æ°á»£c):
- **cÃ¡i, quáº£, há»™p**: Giá»¯ nguyÃªn (1:1)

---

## ğŸ“ CÃ¡ch Sá»­ Dá»¥ng

### 1. **ThÃªm NguyÃªn Liá»‡u Má»›i**

```
1. VÃ o "Kho NguyÃªn Liá»‡u" â†’ "ThÃªm NguyÃªn Liá»‡u"
2. Äiá»n thÃ´ng tin:
   - TÃªn: "Bá»™t mÃ¬ Ä‘a dá»¥ng"
   - ÄÆ¡n vá»‹ mua: "kg" (mua theo kg)
   - ÄÆ¡n vá»‹ sá»­ dá»¥ng: "g" (dÃ¹ng theo gram)
   - GiÃ¡ nháº­p: 20000 (cho 1kg)
   - Sá»‘ lÆ°á»£ng mua: 1 (1kg)
   - Tá»“n kho: 5000 (5000g = 5kg)
3. LÆ°u
```

**Káº¿t quáº£:**
- Mua: 1kg = 20,000Ä‘
- Tá»“n kho: 5,000g
- GiÃ¡ vá»‘n: 20Ä‘/g (tá»± Ä‘á»™ng tÃ­nh)

### 2. **Nháº­p CÃ´ng Thá»©c**

```
1. VÃ o "CÃ´ng Thá»©c" â†’ Chá»n sáº£n pháº©m
2. Click "ThÃªm nguyÃªn liá»‡u"
3. Chá»n "Bá»™t mÃ¬ Ä‘a dá»¥ng"
4. Nháº­p sá»‘ lÆ°á»£ng: 150 (gram)
   â†’ Hiá»ƒn thá»‹: "150 g"
   â†’ Tooltip: "(Mua: kg)"
5. GiÃ¡ vá»‘n tá»± Ä‘á»™ng tÃ­nh: 150 Ã— 20Ä‘ = 3,000Ä‘
```

### 3. **Xem Chuáº©n Bá»‹ NguyÃªn Liá»‡u**

```
1. VÃ o "Chuáº©n Bá»‹ NguyÃªn Liá»‡u"
2. Há»‡ thá»‘ng tÃ­nh:
   - Cáº§n: 500g (theo Ä‘Æ¡n vá»‹ sá»­ dá»¥ng)
   - Cáº§n mua: 0.5kg (tá»± Ä‘á»™ng convert sang Ä‘Æ¡n vá»‹ mua)
3. Mua theo Ä‘Æ¡n vá»‹ mua: 0.5kg
```

---

## ğŸ“Š VÃ­ Dá»¥ Chi Tiáº¿t

### **Scenario 1: Bá»™t MÃ¬**

**Setup:**
```
TÃªn: Bá»™t mÃ¬ Ä‘a dá»¥ng
ÄÆ¡n vá»‹ mua: kg
ÄÆ¡n vá»‹ sá»­ dá»¥ng: g
GiÃ¡: 20,000Ä‘/1kg
Tá»“n kho: 5,000g
```

**Trong cÃ´ng thá»©c:**
```
BÃ¡nh bÃ´ng lan cáº§n: 150g bá»™t mÃ¬
â†’ GiÃ¡ vá»‘n: (20,000Ä‘ / 1,000g) Ã— 150g = 3,000Ä‘
```

**Khi mua thÃªm:**
```
Mua: 2kg = 40,000Ä‘
â†’ Tá»“n kho má»›i: 5,000g + 2,000g = 7,000g
```

### **Scenario 2: Sá»¯a TÆ°Æ¡i**

**Setup:**
```
TÃªn: Sá»¯a tÆ°Æ¡i khÃ´ng Ä‘Æ°á»ng
ÄÆ¡n vá»‹ mua: L (lÃ­t)
ÄÆ¡n vá»‹ sá»­ dá»¥ng: ml
GiÃ¡: 32,000Ä‘/1L
Tá»“n kho: 800ml
```

**Trong cÃ´ng thá»©c:**
```
BÃ¡nh mousse cáº§n: 100ml sá»¯a
â†’ GiÃ¡ vá»‘n: (32,000Ä‘ / 1,000ml) Ã— 100ml = 3,200Ä‘
```

---

## ğŸ¨ UI Indicators

### **Báº£ng NguyÃªn Liá»‡u:**
```
TÃªn          | Tá»“n Kho | ÄÆ¡n Vá»‹ Mua | ÄÆ¡n Vá»‹ Sá»­ Dá»¥ng | GiÃ¡ Mua | GiÃ¡ Vá»‘n/ÄV
Bá»™t mÃ¬       | 5,000g  | 1kg        | g (Mua: kg)    | 20,000Ä‘ | 20Ä‘/g
```

### **Form Nháº­p:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÄÆ¡n vá»‹ mua: [kg â–¼]          â”‚
â”‚ ğŸ’µ ÄÆ¡n vá»‹ khi mua nguyÃªn liá»‡uâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ÄÆ¡n vá»‹ sá»­ dá»¥ng: [g â–¼]       â”‚
â”‚ ğŸ“ ÄÆ¡n vá»‹ khi nháº­p vÃ o cÃ´ng thá»©câ”‚
â”‚ â„¹ï¸ Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i: 1kg = 1000gâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **CÃ´ng Thá»©c:**
```
Bá»™t mÃ¬ Ä‘a dá»¥ng
GiÃ¡ gá»‘c: 20Ä‘ / g (Mua: kg)
[150] g
```

---

## âš™ï¸ Logic TÃ­nh ToÃ¡n

### **TÃ­nh GiÃ¡ Vá»‘n:**

```typescript
// Step 1: GiÃ¡ má»—i Ä‘Æ¡n vá»‹ mua
costPerBuyingUnit = price / buyingQuantity
// VD: 20,000Ä‘ / 1kg = 20,000Ä‘/kg

// Step 2: Conversion factor
factor = getUnitConversionFactor(buyingUnit, usageUnit)
// VD: kg â†’ g = 1000

// Step 3: GiÃ¡ má»—i Ä‘Æ¡n vá»‹ sá»­ dá»¥ng
costPerUsageUnit = costPerBuyingUnit / factor
// VD: 20,000Ä‘ / 1000 = 20Ä‘/g

// Step 4: GiÃ¡ vá»‘n cho sá»‘ lÆ°á»£ng dÃ¹ng
totalCost = costPerUsageUnit Ã— quantity
// VD: 20Ä‘/g Ã— 150g = 3,000Ä‘
```

### **TÃ­nh Sá»‘ LÆ°á»£ng Cáº§n Mua:**

```typescript
// Cáº§n cho Ä‘Æ¡n hÃ ng (theo usageUnit)
required = 500g

// Tá»“n kho hiá»‡n táº¡i (theo usageUnit)
stock = 200g

// Cáº§n mua thÃªm (theo usageUnit)
needToBuy = 500g - 200g = 300g

// Convert sang Ä‘Æ¡n vá»‹ mua
needToBuyInBuyingUnit = 300g / 1000 = 0.3kg
```

---

## âœ… Best Practices

### 1. **Chá»n ÄÆ¡n Vá»‹ PhÃ¹ Há»£p**

**ÄÆ¡n vá»‹ mua:**
- âœ… Chá»n Ä‘Æ¡n vá»‹ báº¡n thÆ°á»ng mua
- âœ… VD: kg (khÃ´ng pháº£i g), L (khÃ´ng pháº£i ml)

**ÄÆ¡n vá»‹ sá»­ dá»¥ng:**
- âœ… Chá»n Ä‘Æ¡n vá»‹ dá»… nháº­p trong cÃ´ng thá»©c
- âœ… VD: g (khÃ´ng pháº£i kg), ml (khÃ´ng pháº£i L)

### 2. **Nháº¥t QuÃ¡n**

- âœ… Táº¥t cáº£ nguyÃªn liá»‡u cÃ¹ng loáº¡i dÃ¹ng cÃ¹ng Ä‘Æ¡n vá»‹ sá»­ dá»¥ng
- âœ… VD: Táº¥t cáº£ bá»™t â†’ dÃ¹ng "g", táº¥t cáº£ cháº¥t lá»ng â†’ dÃ¹ng "ml"

### 3. **Kiá»ƒm Tra Conversion**

- âœ… Sau khi nháº­p, check giÃ¡ vá»‘n cÃ³ há»£p lÃ½ khÃ´ng
- âœ… VD: 150g bá»™t mÃ¬ = 3,000Ä‘ (há»£p lÃ½)

---

## ğŸ› Troubleshooting

### **GiÃ¡ vá»‘n quÃ¡ cao/tháº¥p?**
â†’ Kiá»ƒm tra conversion factor cÃ³ Ä‘Ãºng khÃ´ng
â†’ Verify Ä‘Æ¡n vá»‹ mua vÃ  Ä‘Æ¡n vá»‹ sá»­ dá»¥ng

### **Sá»‘ lÆ°á»£ng khÃ´ng khá»›p?**
â†’ Äáº£m báº£o tá»“n kho nháº­p theo Ä‘Æ¡n vá»‹ sá»­ dá»¥ng
â†’ Check conversion khi mua thÃªm

### **KhÃ´ng chuyá»ƒn Ä‘á»•i Ä‘Æ°á»£c?**
â†’ Kiá»ƒm tra 2 Ä‘Æ¡n vá»‹ cÃ³ cÃ¹ng loáº¡i khÃ´ng (weight/volume/count)
â†’ Xem `unitConverter.ts` Ä‘á»ƒ thÃªm conversion má»›i

---

## ğŸ“š Technical Details

### **Database:**
```sql
ingredients (
  unit TEXT,        -- ÄÆ¡n vá»‹ mua
  usage_unit TEXT,  -- ÄÆ¡n vá»‹ sá»­ dá»¥ng
  current_stock DECIMAL, -- Tá»“n kho theo usage_unit
  ...
)
```

### **TypeScript:**
```typescript
interface Ingredient {
  unit: Unit;        // ÄÆ¡n vá»‹ mua
  usageUnit: Unit;   // ÄÆ¡n vá»‹ sá»­ dá»¥ng
  currentStock: number; // Theo usageUnit
}
```

### **Conversion Functions:**
- `getUnitConversionFactor()` - Láº¥y há»‡ sá»‘ chuyá»ƒn Ä‘á»•i
- `convertToUsageUnit()` - Convert sang Ä‘Æ¡n vá»‹ sá»­ dá»¥ng
- `convertToBuyingUnit()` - Convert sang Ä‘Æ¡n vá»‹ mua

---

**Version:** 1.5.0  
**Last Updated:** December 10, 2024

